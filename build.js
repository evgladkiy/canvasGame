!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=9)}([function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,i){var n=new u(e,i);n.init(t,e,i);var s=new Promise(function(t,e){n.audioElement.oncanplay=function(){return t()}});return a.push(s),n}function o(t){var e=new Image;e.src=t;var i=new Promise(function(t,i){e.onload=function(){return t()}});return a.push(i),e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=e.promisesArr=[],u=function(){function t(){n(this,t),this.audioElement=new Audio}return r(t,[{key:"play",value:function(){this.audioElement.play()}},{key:"pause",value:function(){this.audioElement.pause()}},{key:"stop",value:function(){this.audioElement.currentTime=0,this.audioElement.pause()}},{key:"resetTime",value:function(){this.audioElement.currentTime=0}},{key:"init",value:function(t,e,i){var n=document.createElement("source");n.src=t,this.audioElement.appendChild(n),this.audioElement.volume=e||1,this.audioElement.loop=i||!1}}]),t}();e.heroImg=o("./img/heroAll.png"),e.zombieMale=o("./img/zombieAll.png"),e.zombieFemale=o("./img/zombieAllF.png"),e.background=o("./img/background.jpg"),e.road=o("./img/road.png"),e.otherImg=o("./img/other.png"),e.pauseMenu=o("./img/menu1.png"),e.control=o("./img/control.png"),e.playTheme=s("./sounds/playTheme.ogg",.2,!0),e.mainMenuTheme=s("./sounds/Loop.mp3",.2,!0),e.throwSound=s("./sounds/swing.mp3",.6),e.heroDeadSound=s("./sounds/scream.mp3",.3),e.swordSound=s("./sounds/sword.ogg",.6),e.kunaiInZombieSound=s("./sounds/splat3.mp3"),e.pointsSound=s("./sounds/points.mp3"),e.zombieAttackSound=s("./sounds/yuck.mp3",.3),e.bossDeadSound=s("./sounds/yuck2.mp3",.3),e.pauseSound=s("./sounds/pause.mp3",.5),e.clickMenuSound=s("./sounds/puff.mp3",.8),e.loseSound=s("./sounds/losemusic.mp3",.6),e.winSound=s("./sounds/winmusic.mp3",.6),e.heroHurted=s("./sounds/scream2.mp3",.4),e.zombieFellSound=s("./sounds/zombie_falling_1.mp3",.8),e.zombieReincarnationSound=s("./sounds/groan4.mp3",.8)},function(t,e,i){"use strict";function n(){return{attackState:{width:261,height:288,startX:0,startY:0,dx:0,dy:0,currentSpriteImg:0,spriteCount:8},runState:{width:261,height:288,startX:0,startY:288,dx:0,dy:0,currentSpriteImg:0,spriteCount:10},deadState:{width:342,height:314,startX:0,startY:576,dx:0,dy:0,currentSpriteImg:0,spriteCount:12}}}function s(){return{stayState:{width:129,height:156,startX:0,startY:156,dx:0,dy:0,currentSpriteImg:0,spriteCount:15,correctLeftDx:40},runState:{width:129,height:156,startX:0,startY:469,dx:0,dy:0,currentSpriteImg:0,spriteCount:10,correctLeftDx:40},attackState:{width:129,height:156,startX:0,startY:312,dx:0,dy:0,currentSpriteImg:0,spriteCount:8,correctLeftDx:39},deadState:{width:189,height:158,startX:0,startY:0,dx:-45,dy:15,currentSpriteImg:0,spriteCount:12,correctLeftDx:75}}}Object.defineProperty(e,"__esModule",{value:!0});var o={deadState:{width:145,height:149,startX:0,startY:0,dx:0,dy:-10,currentSpriteImg:0,spriteCount:10,isCurrent:!1,correctLeftDx:-60},jumpState:{width:109,height:200,startX:0,startY:149,dx:-20,dy:-60,currentSpriteImg:0,spriteCount:10,isCurrent:!1,correctLeftDx:0},runState:{width:109,height:137,startX:0,startY:349,dx:-10,dy:0,currentSpriteImg:0,spriteCount:10,isCurrent:!1,correctLeftDx:0},stayState:{width:72,height:132,startX:0,startY:487,dx:0,dy:0,currentSpriteImg:0,spriteCount:10,isCurrent:!1,correctLeftDx:5},swordAttackState:{width:161,height:149,startX:0,startY:620,dx:-10,dy:-3,currentSpriteImg:0,spriteCount:10,isCurrent:!1,correctLeftDx:-65},throwState:{width:113,height:135,startX:0,startY:769,dx:-26,dy:-1,currentSpriteImg:0,spriteCount:10,isCurrent:!1,correctLeftDx:14},slideState:{width:112,height:105,startX:0,startY:904,dx:-35,dy:39,currentSpriteImg:0,spriteCount:10,isCurrent:!1,correctLeftDx:0}},r={replay:{hovered:!1,positionX:483,positionY:250,positionXOnSprite:368,positionYOnSprite:0},replayEnd:{hovered:!1,positionX:645,positionY:250,positionXOnSprite:368,positionYOnSprite:0},continue:{hovered:!1,positionX:645,positionY:250,positionXOnSprite:0,positionYOnSprite:0},exit:{hovered:!1,positionX:483,positionY:250,positionXOnSprite:735,positionYOnSprite:0},settings:{nextImageDist:184,widthOnSprite:185,heightOnSprite:93,width:145,height:73}},a={play:{hovered:!1,positionX:512,positionY:210,positionXOnSprite:575,positionYOnSprite:244},difficulty:{hovered:!1,positionX:512,positionY:300,positionXOnSprite:575,positionYOnSprite:170},control:{hovered:!1,positionX:512,positionY:390,positionXOnSprite:575,positionYOnSprite:96},babyMode:{hovered:!1,isActive:!1,positionX:512,positionY:150,positionXOnSprite:2,positionYOnSprite:400},normal:{hovered:!1,isActive:!0,positionX:512,positionY:240,positionXOnSprite:2,positionYOnSprite:548},hellMode:{hovered:!1,isActive:!1,positionX:512,positionY:330,positionXOnSprite:2,positionYOnSprite:474},mainMenu:{hovered:!1,positionX:512,positionY:420,positionXOnSprite:575,positionYOnSprite:318},settings:{nextImageDist:254,widthOnSprite:250,heightOnSprite:70,width:250,height:70}},u={mainMenuControl:{hovered:!1,positionX:555,positionY:450,positionXOnSprite:575,positionYOnSprite:318},settings:{nextImageDist:254,widthOnSprite:250,heightOnSprite:70,width:175,height:49}};e.heroStates=o,e.setZombiesStates=s,e.setBossStates=n,e.pauseMenuButtons=r,e.controlMenuButtons=u,e.mainMenuButtons=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){return Math.floor(Math.random()*(e-t))+t}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e,i){n(this,t),this.callback=e,this.timerId=null,this.start=null,this.remaining=i}return o(t,[{key:"pause",value:function(){clearTimeout(this.timerId),this.remaining-=new Date-this.start}},{key:"resume",value:function(){this.start=new Date,clearTimeout(this.timerId),this.timerId=setTimeout(this.callback,this.remaining)}},{key:"init",value:function(){this.resume()}}]),t}(),a=function t(){n(this,t),this.delayTime=3,this.score=0,this.bgPosition=0,this.roadPosition=0,this.bgDx=u.bgDx,this.isStarted=!1,this.isPaused=!1,this.isStartDelayEnded=!1,this.isShowMainMenu=!0,this.isShowDifficultyMenu=!1,this.isShowControl=!1,this.isEnded=!1,this.isWin=!1,this.menuId=null,this.gameId=null,this.startDelay=null,this.addZombieTimer=null},u={pointsForZombie:100,randomBonusesTime:10,kunaiDx:7,heroDx:5,bgDx:1,heroSpeed:50,heroDeadSpeed:150,zombieSpeed:75,bossSpeed:100,deadZombiesTime:2500,checkStatusTime:75,zombieFeelHeroDistance:300,immortalTime:120,difficulty:1};e.settings=u,e.Timeout=r,e.getRandomInt=s,e.Game=a},function(t,e,i){"use strict";function n(t,e){return t.codes.some(function(t){return t===e})}function s(t,e,i,s){n(h.run,t.keyCode)?(e.currentState===e.states.runState&&!e.isLeft||e.isPerformSingleAction||e.isDead||i.isPaused||e.setCurrentState(e.states.runState),e.isLeft=!1,h.run.isPressed=!0):n(h.runLeft,t.keyCode)?(e.currentState===e.states.runState&&e.isLeft||e.isPerformSingleAction||e.isDead||i.isPaused||e.setCurrentState(e.states.runState),e.isLeft=!0,h.runLeft.isPressed=!0):n(h.jump,t.keyCode)?(e.isPerformSingleAction||e.isDead||i.isPaused||e.setOneAction(e.states.jumpState,40,i,s),h.jump.isPressed=!0):n(h.slide,t.keyCode)?(e.isPerformSingleAction||e.isDead||i.isPaused||e.slideTimer||(e.slideTimer=!0,e.setOneAction(e.states.slideState,40,i,s),setTimeout(function(){return e.slideTimer=!1},1500)),h.slide.isPressed=!0):n(h.swordAttack,t.keyCode)?(e.isPerformSingleAction||e.isDead||i.isPaused||(e.setOneAction(e.states.swordAttackState,40,i,s),c.swordSound.resetTime(),c.swordSound.play()),h.swordAttack.isPressed=!0):n(h.throw,t.keyCode)&&(!e.isPerformSingleAction&&!e.isDead&&e.kunaiCount>0&&!i.isPaused&&e.setOneAction(e.states.throwState,40,i,s),h.throw.isPressed=!0)}function o(t,e,i){n(h.run,t.keyCode)?(e.isPerformSingleAction||e.isDead||h.runLeft.isPressed||i.isPaused||e.setCurrentState(e.states.stayState),h.run.isPressed=!1,h.runLeft.isPressed&&!i.isPaused&&(e.isLeft=!0)):n(h.runLeft,t.keyCode)?(e.isPerformSingleAction||e.isDead||h.run.isPressed||i.isPaused||e.setCurrentState(e.states.stayState),h.run.isPressed&&!i.isPaused&&(e.isLeft=!1),h.runLeft.isPressed=!1):n(h.jump,t.keyCode)?h.jump.isPressed=!1:n(h.slide,t.keyCode)?h.slide.isPressed=!1:n(h.swordAttack,t.keyCode)?h.swordAttack.isPressed=!1:n(h.throw,t.keyCode)&&(h.throw.isPressed=!1)}function r(t,e,i){document.onkeydown=function(n){s(n,e,t,i)}}function a(t,e){document.onkeyup=function(i){o(i,e,t)}}function u(){document.onkeydown=void 0}function d(){document.onkeyup=void 0}Object.defineProperty(e,"__esModule",{value:!0}),e.buttons=void 0,e.isButtonsPressed=n,e.setHeroKeydownListeners=r,e.setHeroKeyupListeners=a,e.removeHeroKeydownListeners=u,e.removeHeroKeyupListeners=d;var c=i(0),h=e.buttons={run:{codes:[39,68],isPressed:!1},runLeft:{codes:[37,65],isPressed:!1},jump:{codes:[38,87],isPressed:!1},slide:{codes:[83,98],isPressed:!1},swordAttack:{codes:[32],isPressed:!1},throw:{codes:[69],isPressed:!1},pause:{codes:[27],isPressed:!1}}},function(t,e,i){"use strict";function n(){X.clearRect(0,0,B.width,B.height)}function s(t){t.isInvisible&&(X.globalAlpha=.5),t.isLeft?X.drawImage(t.img,t.currentState.startX+t.currentState.width*t.currentState.currentSpriteImg,t.currentState.startY+t.leftDy,t.currentState.width,t.currentState.height,t.positionX+t.currentState.dx+t.currentState.correctLeftDx,t.positionY+t.currentState.dy,t.currentState.width,t.currentState.height):X.drawImage(t.img,t.currentState.startX+t.currentState.width*t.currentState.currentSpriteImg,t.currentState.startY,t.currentState.width,t.currentState.height,t.positionX+t.currentState.dx,t.positionY+t.currentState.dy,t.currentState.width,t.currentState.height),1!==X.globalAlpha&&(X.globalAlpha=1)}function o(t){X.beginPath(),X.arc(70,70,45,0,2*Math.PI,!0),X.fillStyle="#000",X.globalAlpha=.4,X.fill(),X.globalAlpha=1,X.beginPath(),X.arc(70,70,45,0,2*Math.PI,!0),X.lineWidth=1.5,X.fillStyle="#fff",X.stroke(),X.drawImage(b.otherImg,72,2,93,93,33,31,80,80),X.drawImage(b.otherImg,0,14,48,12,130,82,60,15),X.font="bold 24px serif",X.fillStyle="#111",X.fillText("x "+t.kunaiCount,195,95);for(var e=0;e<=t.maxHealth-1;e++)e<t.health&&X.drawImage(b.otherImg,3,45,38,38,130+35*e,40,25,25),X.drawImage(b.otherImg,168,44,40,40,127+35*e,37,31,31)}function r(t){Array.isArray(t.data)&&t.data.forEach(function(t){t.isLeft?X.drawImage(t.img,t.currentState.startX+t.currentState.width*t.currentState.currentSpriteImg,t.currentState.startY,t.currentState.width,t.currentState.height,t.positionX+t.currentState.dx,t.positionY+t.currentState.dy,t.currentState.width,t.currentState.height):X.drawImage(t.img,t.currentState.startX+t.currentState.width*t.currentState.currentSpriteImg,t.currentState.startY+t.leftDy,t.currentState.width,t.currentState.height,t.positionX+t.currentState.dx+t.currentState.correctLeftDx,t.positionY+t.currentState.dy,t.currentState.width,t.currentState.height)})}function a(t,e){t.isStartDelayEnded?(e.isHurted&&(X.globalAlpha=.5),X.drawImage(e.img,e.currentState.startX+e.currentState.width*e.currentState.currentSpriteImg,e.currentState.startY,e.currentState.width,e.currentState.height,e.positionX+e.currentState.dx,e.positionY+e.currentState.dy,e.currentState.width,e.currentState.height),1!==X.globalAlpha&&(X.globalAlpha=1)):X.drawImage(e.img,e.currentState.startX+e.currentState.width*e.currentState.currentSpriteImg,e.currentState.startY,e.currentState.width,e.currentState.height,e.startPositionX+e.currentState.dx,e.positionY+e.currentState.dy,e.currentState.width,e.currentState.height)}function u(t){X.lineWidth=.5,X.fillStyle=I,X.fillRect(450,40,380/t.health*t.currentHealth,25),X.strokeRect(450,40,380,25)}function d(t,e){X.drawImage(t,0-e,0,B.width,480),X.drawImage(t,0,0,1280,630,B.width-e,0,B.width,480)}function c(t,e){X.drawImage(t,0-e,450,B.width,200),X.drawImage(t,0,0,1280,240,B.width-e,450,B.width,200)}function h(t){t.filterSet(),t.data.forEach(function(t){t.isLeft?X.drawImage(b.otherImg,0,2,t.width,t.height,t.positionX-100,t.positionY,t.width,t.height):X.drawImage(b.otherImg,0,14,t.width,t.height,t.positionX,t.positionY,t.width,t.height)})}function m(t,e){e.data.forEach(function(e){X.drawImage(b.otherImg,e.positionXOnImage,e.positionYOnImage,e.standardWidth,e.standardHeight,e.positionX,e.positionY,e.width,e.height),t.isPaused||(e.positionX-=2*t.bgDx)})}function l(t){X.font="32px serif",X.fillStyle="#eeeeee",X.fillText("Score: "+t.score,1050,63)}function p(){X.fillStyle="#000",X.globalAlpha=.4,X.fillRect(0,0,B.width,B.height),X.globalAlpha=1}function f(t){X.font="36px serif",X.fillStyle="#eeeeee",X.fillText("Survive and kill the Boss!",450,150),t.delayTime>0&&X.fillText(""+t.delayTime,620,200),0===t.delayTime&&X.fillText("Run!",600,200)}function S(){X.drawImage(b.pauseMenu,2,95,573,304,415,150,458,243),X.font="bold 32px serif",X.fillStyle="#eeeeee",X.fillText("Pause!",595,235),y(k.pauseMenuButtons.replay,k.pauseMenuButtons.settings),y(k.pauseMenuButtons.continue,k.pauseMenuButtons.settings)}function g(t){X.drawImage(b.pauseMenu,2,95,573,304,415,150,458,243),X.font="bold 32px serif",X.fillStyle="#eeeeee",t.isWin?(X.fillText("You Win!",483,235),X.font="bold 28px serif",X.fillText("Score: "+t.score+"!",625,235)):X.fillText("You Lose! Try Again!",490,235),y(k.pauseMenuButtons.exit,k.pauseMenuButtons.settings),y(k.pauseMenuButtons.replayEnd,k.pauseMenuButtons.settings)}function y(t,e){t.isActive?X.drawImage(b.pauseMenu,t.positionXOnSprite+2*e.nextImageDist,t.positionYOnSprite,e.widthOnSprite,e.heightOnSprite,t.positionX,t.positionY,e.width,e.height):t.hovered?X.drawImage(b.pauseMenu,t.positionXOnSprite+e.nextImageDist,t.positionYOnSprite,e.widthOnSprite,e.heightOnSprite,t.positionX,t.positionY,e.width,e.height):X.drawImage(b.pauseMenu,t.positionXOnSprite,t.positionYOnSprite,e.widthOnSprite,e.heightOnSprite,t.positionX,t.positionY,e.width,e.height)}function v(){X.drawImage(b.pauseMenu,760,400,430,440,420,120,430,440),y(k.mainMenuButtons.play,k.mainMenuButtons.settings),y(k.mainMenuButtons.difficulty,k.mainMenuButtons.settings),y(k.mainMenuButtons.control,k.mainMenuButtons.settings)}function w(){X.drawImage(b.pauseMenu,760,400,430,440,420,60,430,530),y(k.mainMenuButtons.babyMode,k.mainMenuButtons.settings),y(k.mainMenuButtons.normal,k.mainMenuButtons.settings),y(k.mainMenuButtons.hellMode,k.mainMenuButtons.settings),y(k.mainMenuButtons.mainMenu,k.mainMenuButtons.settings)}function M(){X.drawImage(b.pauseMenu,761,400,430,440,375,60,530,530),X.font="bold 32px serif",X.fillStyle="#eeeeee",X.fillText("Controls:",580,160),X.drawImage(b.control,0,0,450,330,470,170,360,264),y(k.controlMenuButtons.mainMenuControl,k.controlMenuButtons.settings)}Object.defineProperty(e,"__esModule",{value:!0}),e.canvas=void 0,e.clearCanvas=n,e.drawHero=s,e.drawHeroStatus=o,e.drawZombies=r,e.drawZomieBoss=a,e.drawBossHealth=u,e.drawBg=d,e.drawRoad=c,e.drawKunai=h,e.drawRandomBonuses=m,e.drawScore=l,e.drawMenubg=p,e.drawWinConditions=f,e.drawPauseMenu=S,e.drawEndMenu=g,e.drawButton=y,e.drawMainMenu=v,e.drawDifficultyMenu=w,e.drawControlMenu=M;var b=i(0),k=i(1),B=e.canvas=document.getElementById("canvas"),X=B.getContext("2d"),I=X.createLinearGradient(0,0,0,130);I.addColorStop(0,"#fff"),I.addColorStop(.5,"#dd2108"),I.addColorStop(1,"#fff")},function(t,e,i){"use strict";function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.KunaiSet=e.BonusesSet=e.ObjectsSet=void 0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(2),u=i(0),d=e.ObjectsSet=function(){function t(){o(this,t),this.data=[]}return r(t,[{key:"remove",value:function(t){this.data.splice(this.data.indexOf(t),1)}},{key:"add",value:function(t){this.data.push(t)}}]),t}(),c=function t(){o(this,t),this.item="heart",this.standardWidth=38,this.standardHeight=38,this.width=30,this.height=30,this.positionXOnImage=168,this.positionYOnImage=2,this.positionX=canvas.width+40,this.positionY=300},h=function t(){o(this,t),this.item="kunai",this.standardWidth=12,this.standardHeight=48,this.width=12,this.height=48,this.positionXOnImage=55,this.positionYOnImage=2,this.positionX=canvas.width+40,this.positionY=280},m=(e.BonusesSet=function(t){function e(){o(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.canAddBonus=!1,t}return s(e,t),r(e,[{key:"createRandomBonus",value:function(t){var e=(0,a.getRandomInt)(1,6),i=void 0;i=5===e&&1!==t.maxHealth?new c:new h,this.add(i)}},{key:"isHeroCatchBonus",value:function(t,e){return t.positionX-e.positionX-e.currentState.width+30<=0&&t.positionX+t.width-e.positionX>0&&e.currentState===e.states.jumpState&&e.currentState.currentSpriteImg>3&&e.currentState.currentSpriteImg<7}},{key:"checkStatus",value:function(t){var e=this;this.data.forEach(function(i){e.isHeroCatchBonus(i,t)?"kunai"===i.item?(t.kunaiCount+=10-2*a.settings.difficulty,e.remove(i),u.pointsSound.resetTime(),u.pointsSound.play()):"heart"===i.item&&t.health<t.maxHealth&&(t.health+=1,e.remove(i),u.pointsSound.resetTime(),u.pointsSound.play()):i.positionX+i.width<0&&e.remove(i)})}},{key:"checkOpportunityToCreateBonus",value:function(t,e){e.score>=a.settings.pointsForZombie*a.settings.randomBonusesTime&&e.score%(a.settings.pointsForZombie*a.settings.randomBonusesTime)==0?this.canAddBonus&&(this.canAddBonus=!1,this.createRandomBonus(t)):this.canAddBonus=!0}}]),e}(d),function t(e,i,n){o(this,t),this.positionX=n.positionX+50,this.positionY=n.positionY+70,this.width=48,this.height=12,this.positionDx=e,this.isLeft=i});e.KunaiSet=function(t){function e(){return o(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return s(e,t),r(e,[{key:"changePosition",value:function(){this.data.forEach(function(t){return t.positionX+=t.positionDx})}},{key:"addKunai",value:function(t){return t.isLeft?this.add(new m(-a.settings.kunaiDx-2*a.settings.bgDx,!0,t)):this.add(new m(a.settings.kunaiDx,!1,t)),this}},{key:"filterSet",value:function(){this.data=this.data.filter(function(t){return t.positionX<canvas.width&&t.positionX+42>0})}},{key:"isKunaiInZombie",value:function(t,e){return e.isLeft?t.positionX-t.width>e.positionX&&t.positionX<e.positionX+e.currentState.width+30:t.positionX-t.width>e.positionX&&t.positionX<e.positionX+e.currentState.width+40}},{key:"isKunaiInBossZombie",value:function(t,e,i){return t.isLeft&&i.positionX>e.positionX+100&&t.positionX+40<e.positionX+e.currentState.width||!t.isLeft&&e.positionX<t.positionX&&t.positionX+80<e.positionX+e.currentState.width}},{key:"checkStatus",value:function(t,e,i,n){var s=this;this.data.forEach(function(o){s.isKunaiInBossZombie(o,e,i)&&e.currentHealth>0&&(s.remove(o),e.isHurted=!0,e.currentHealth-=1,u.kunaiInZombieSound.resetTime(),u.kunaiInZombieSound.play(),setTimeout(function(){return e.isHurted=!1},50)),t.data.forEach(function(e){!s.isKunaiInZombie(o,e)||e.fakeDead||e.isDead||e.isFell||(s.remove(o),e.makeDead(t,n))})})}}]),e}(d)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Hero=void 0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(2),r=i(1),a=i(3),u=i(0);e.Hero=function(){function t(){n(this,t),this.img=u.heroImg,this.positionX=canvas.width/2,this.positionY=355,this.leftDy=1011,this.kunaiCount=10-2*o.settings.difficulty,this.health=3,this.maxHealth=5-2*o.settings.difficulty,this.immortalTime=o.settings.immortalTime,this.isPerformSingleAction=!1,this.isDead=!1,this.isLeft=!1,this.isImmortal=!1,this.isInvisible=!1,this.isOneAction=!1,this.immortalTimer=null,this.oneActionTimer=null,this.stateCopy=null,this.slideTimer=null,this.mainTimer=null,this.states=Object.assign({},r.heroStates)}return s(t,[{key:"setCurrentState",value:function(t){for(var e in this.states)this.states[e].isCurrent=!1,this.states[e]===t&&(t.currentSpriteImg=0,t.isCurrent=!0,this.currentState=t)}},{key:"throwKunai",value:function(t){u.throwSound.resetTime(),u.throwSound.play(),t.addKunai(this),this.kunaiCount-=1}},{key:"setOneAction",value:function(t,e,i,n){var s=this;clearInterval(this.mainTimer),this.isPerformSingleAction=!0,this.setCurrentState(t),this.oneActionTimer=setInterval(function(){i.isPaused?clearInterval(s.oneActionTimer):s.isDead||(s.currentState.currentSpriteImg>=s.currentState.spriteCount-1?(clearInterval(s.oneActionTimer),s.isPerformSingleAction=!1,s.startMainTimer(),(0,a.setHeroKeydownListeners)(i,s,n),(0,a.setHeroKeyupListeners)(i,s),a.buttons.jump.isPressed?s.setOneAction(s.states.jumpState,o.settings.heroSpeed,i,n):a.buttons.swordAttack.isPressed?(s.setOneAction(s.states.swordAttackState,o.settings.heroSpeed,i,n),u.swordSound.resetTime(),u.swordSound.play()):a.buttons.throw.isPressed&&s.kunaiCount>0?s.setOneAction(s.states.throwState,o.settings.heroSpeed,i,n):a.buttons.run.isPressed||a.buttons.runLeft.isPressed?s.setCurrentState(s.states.runState):s.setCurrentState(s.states.stayState)):(2==s.currentState.currentSpriteImg&&s.states.throwState===s.currentState&&s.kunaiCount>0&&s.throwKunai(n),s.currentState.currentSpriteImg+=1))},e)}},{key:"makeHeroDamage",value:function(t,e){this.health-=1,this.health<=0?this.makeHeroDead(e):(this.isImmortal=!0,this.isInvisible=!0,u.heroHurted.play(),this.makeHeroImortal(this.immortalTime,t))}},{key:"makeHeroImortal",value:function(t,e){function i(){var t=this;this.isInvisible=!this.isInvisible,this.immortalTime<=0?(this.immortalTime=o.settings.immortalTime,this.isImmortal=!1,e.data.forEach(function(e){!e.isDead&&e.isLeft&&t.positionX-e.positionX<o.settings.zombieFeelHeroDistance&&t.positionX-e.positionX>0?e.isLeft=!1:!e.isDead&&!e.isLeft&&e.positionX-t.positionX<o.settings.zombieFeelHeroDistance&&e.positionX-t.positionX>0&&(e.isLeft=!0)}),clearTimeout(this.immortalTimer)):(this.immortalTime-=5,this.immortalTimer=setTimeout(n,this.immortalTime))}this.immortalTimer=setTimeout(i,t);var n=i.bind(this)}},{key:"makeHeroDead",value:function(t){var e=this;this.isDead=!0,this.setCurrentState(this.states.deadState),clearInterval(this.mainTimer),u.heroDeadSound.play();var i=setInterval(function(){(0,a.removeHeroKeydownListeners)(),(0,a.removeHeroKeyupListeners)(),e.currentState.currentSpriteImg>=e.currentState.spriteCount-1?(clearInterval(i),t.isPaused=!0,t.isEnded=!0,u.playTheme.stop(),u.loseSound.play()):e.currentState.currentSpriteImg+=1},o.settings.heroDeadSpeed)}},{key:"changePosition",value:function(t){this.states.jumpState.isCurrent&&a.buttons.run.isPressed?this.positionX+this.currentState.width<canvas.width+10&&(this.positionX+=o.settings.heroDx-2*t):this.states.jumpState.isCurrent&&a.buttons.runLeft.isPressed?this.positionX>5&&(this.positionX-=o.settings.heroDx):this.states.runState.isCurrent&&!this.isLeft?this.positionX+this.currentState.width<canvas.width+5&&(this.positionX+=o.settings.heroDx-2*t):this.states.runState.isCurrent&&this.isLeft?this.positionX>5&&(this.positionX-=o.settings.heroDx):this.states.slideState.isCurrent&&!this.isLeft?this.positionX+this.currentState.width<canvas.width&&(this.positionX+=o.settings.heroDx-2*t):this.states.slideState.isCurrent&&this.isLeft?this.positionX>5&&(this.positionX-=o.settings.heroDx):this.positionX>5&&(this.positionX-=2*t)}},{key:"startMainTimer",value:function(){var t=this;this.mainTimer=setInterval(function(){t.currentState.currentSpriteImg>=t.currentState.spriteCount-1?t.currentState.currentSpriteImg=0:t.currentState.currentSpriteImg+=1},o.settings.heroSpeed)}}]),t}()},function(t,e,i){"use strict";function n(t,e,i){return t.pageX>=e.positionX+y&&t.pageX<=e.positionX+i.width+y&&t.pageY>=e.positionY+g&&t.pageY<=e.positionY+i.height+g}function s(t){t.hovered||(t.hovered=!0,S.canvas.style.cursor="pointer")}function o(t){for(var e in t)!0===t[e].hovered&&(t[e].hovered=!1);S.canvas.style.cursor="default"}function r(t){for(var e in p.mainMenuButtons)p.mainMenuButtons[e].isActive=!1,p.mainMenuButtons[e]===t&&(p.mainMenuButtons[e].isActive=!0)}function a(t,e,i,n){o(p.mainMenuButtons),removeMenuListeners(i,n),game[t]=!1,game.isShowMainMenu=!0,addMenuListeners(d,mainMenuClickCallback)}function u(t,e,i,n){o(e),removeMenuListeners(d,mainMenuClickCallback),game.isShowMainMenu=!1,game[t]=!0,addMenuListeners(i,n),f.clickMenuSound.play()}function d(t){n(t,p.mainMenuButtons.play,p.mainMenuButtons.settings)?s(p.mainMenuButtons.play):n(t,p.mainMenuButtons.difficulty,p.mainMenuButtons.settings)?s(p.mainMenuButtons.difficulty):n(t,p.mainMenuButtons.control,p.mainMenuButtons.settings)?s(p.mainMenuButtons.control):(p.mainMenuButtons.play.hovered||p.mainMenuButtons.difficulty.hovered||p.mainMenuButtons.control.hovered)&&o(p.mainMenuButtons)}function c(t){n(t,p.controlMenuButtons.mainMenuControl,p.controlMenuButtons.settings)?s(p.controlMenuButtons.mainMenuControl):p.controlMenuButtons.mainMenuControl.hovered&&o(p.controlMenuButtons)}function h(t){n(t,p.mainMenuButtons.babyMode,p.mainMenuButtons.settings)?s(p.mainMenuButtons.babyMode):n(t,p.mainMenuButtons.normal,p.mainMenuButtons.settings)?s(p.mainMenuButtons.normal):n(t,p.mainMenuButtons.hellMode,p.mainMenuButtons.settings)?s(p.mainMenuButtons.hellMode):n(t,p.mainMenuButtons.mainMenu,p.mainMenuButtons.settings)?s(p.mainMenuButtons.mainMenu):(p.mainMenuButtons.babyMode.hovered||p.mainMenuButtons.normal.hovered||p.mainMenuButtons.hellMode.hovered||p.mainMenuButtons.mainMenu.hovered)&&o(p.mainMenuButtons)}function m(t){n(t,p.pauseMenuButtons.replay,p.pauseMenuButtons.settings)?s(p.pauseMenuButtons.replay):n(t,p.pauseMenuButtons.continue,p.pauseMenuButtons.settings)?s(p.pauseMenuButtons.continue):(p.pauseMenuButtons.replay.hovered||p.pauseMenuButtons.continue.hovered)&&o(p.pauseMenuButtons)}function l(t){n(t,p.pauseMenuButtons.replayEnd,p.pauseMenuButtons.settings)?s(p.pauseMenuButtons.replayEnd):n(t,p.pauseMenuButtons.exit,p.pauseMenuButtons.settings)?s(p.pauseMenuButtons.exit):(p.pauseMenuButtons.replayEnd||p.pauseMenuButtons.exit)&&o(p.pauseMenuButtons)}Object.defineProperty(e,"__esModule",{value:!0}),e.isButtonHovered=n,e.makeButtonHovered=s,e.resetHoverHoverMenuButtons=o,e.setActiveDifficulty=r,e.goTomeinMenu=a,e.goFromeMenu=u,e.makeMainMenuHovered=d,e.makeControlMenuHovered=c,e.makeDifficultyMenuHovered=h,e.makePauseMenuHovered=m,e.makeReplayEndButtonHovered=l;var p=i(1),f=i(0),S=i(4),g=S.canvas.getBoundingClientRect().top,y=S.canvas.getBoundingClientRect().left},function(t,e,i){"use strict";function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.ZombiesSet=e.ZombieBoss=void 0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(2),u=i(1),d=i(0),c=i(3),h=i(5),m=(e.ZombieBoss=function(){function t(){o(this,t),this.img=d.zombieFemale,this.startPositionX=-220,this.health=15+5*a.settings.difficulty,this.positionX=0,this.startXPosition=0,this.maxXPosition=0,this.currentHealth=0,this.positionY=205,this.isFastRun=!1,this.isHurted=!1,this.isAttack=!1,this.isDead=!1,this.timer=null,this.states=(0,u.setBossStates)()}return r(t,[{key:"changePosition",value:function(t,e,i){t.isStartDelayEnded||(this.startPositionX+=1.1),this.isAttack?this.positionX-=2*t.bgDx:this.isFastRun&&this.positionX>=this.maxXPosition?(clearInterval(this.timer),this.startTimer(a.settings.bossSpeed,t,e,i),this.isFastRun=!1):this.positionX<this.maxXPosition&&(this.isFastRun||(clearInterval(this.timer),this.startTimer(a.settings.bossSpeed-30,t,e,i),this.isFastRun=!0),this.positionX+=1)}},{key:"isZombieBossAttack",value:function(t){return t.positionX<this.positionX+this.currentState.width-70&&!t.isImmortal}},{key:"isCanKillHero",value:function(t){return!t.isImmortal&&3==this.states.attackState.currentSpriteImg&&t.currentState!==t.states.deadState}},{key:"checkStatus",value:function(t){this.isZombieBossAttack(t)&&(this.currentState=this.states.attackState,this.isAttack=!0),0===this.currentHealth&&this.currentState!==this.states.deadState&&(1===this.currentState.currentSpriteImg&&d.bossDeadSound.play(),this.currentState=this.states.deadState)}},{key:"startTimer",value:function(t,e,i,n){var s=this;this.timer=setInterval(function(){s.currentState.currentSpriteImg>=s.currentState.spriteCount-1?s.currentState===s.states.deadState?(s.isDead=!0,e.isWin=!0,e.score+=1500,e.isPaused=!0,e.isEnded=!0,(0,c.removeHeroKeydownListeners)(),(0,c.removeHeroKeyupListeners)(),d.playTheme.stop(),d.winSound.play()):(s.isAttack&&(s.isAttack=!1,s.states.attackState.currentSpriteImg=0,s.currentState=s.states.runState),s.currentState.currentSpriteImg=0):s.currentState.currentSpriteImg+=1,s.isCanKillHero(i)&&s.isZombieBossAttack(i)&&i.makeHeroDamage(n,e)},t)}}]),t}(),e.ZombiesSet=function(t){function e(){o(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.zombiesTimer=null,t}return s(e,t),r(e,[{key:"addNewZombie",value:function(t,e,i,n){var s=(0,a.getRandomInt)(1,6),o=new m(d.zombieMale,t,e);5===s?(o.fakeDead=!0,o.states.deadState.currentSpriteImg=o.states.deadState.spriteCount-1,o.setInitSatate(o.states.deadState,i,n)):o.setInitSatate(o.states.stayState,i,n),this.add(o)}},{key:"changeZombiesPosition",value:function(t){var e=this;this.data.forEach(function(i){(i.positionX+i.currentState.width<=0&&!i.isDead||i.positionX>canvas.width&&!i.isLeft)&&e.remove(i),i.isLeft?i.currentState===i.states.runState&&(i.positionX-=i.dx):i.currentState===i.states.runState&&(i.positionX+=1.5*i.dx),i.positionX-=2*t})}},{key:"changeLieZombiesPozition",value:function(t){this.data.forEach(function(e){e.positionX-=2*t})}},{key:"isZombieAttack",value:function(t,e){return e.positionX>=t.positionX-20&&e.positionX<=t.positionX+t.currentState.width-20&&t.currentState!==t.states.deadState}},{key:"isCanKillHero",value:function(t,e){return!e.isImmortal&&3==t.states.attackState.currentSpriteImg&&e.currentState!==e.states.deadState}},{key:"isSwordInZombie",value:function(t,e){if(e.isLeft&&e.positionX>t.positionX||!e.isLeft&&e.positionX<t.positionX+80)return t.isLeft?e.positionX>=t.positionX-t.currentState.width/2-20&&e.positionX<=t.positionX+t.currentState.width+20:e.positionX>=t.positionX-t.currentState.width/2+10&&e.positionX<=t.positionX+t.currentState.width+50}},{key:"isFakeDeadUp",value:function(t,e){return t.fakeDead&&t.positionX+t.currentState.width>e.positionX-a.settings.zombieFeelHeroDistance&&t.positionX<e.positionX+e.currentState.width+a.settings.zombieFeelHeroDistance}},{key:"isSlideUnderZombie",value:function(t,e){return e.positionX>=t.positionX-t.currentState.width/2+60&&e.positionX<=t.positionX+t.currentState.width}},{key:"checkZombiesStatus",value:function(t,e,i){var n=this;this.data.forEach(function(s){s.isDead||s.isFell||(t.states.swordAttackState.isCurrent&&n.isSwordInZombie(s,t)?s.makeDead(n,e):t.states.slideState.isCurrent&&n.isSlideUnderZombie(s,t)?(s.currentState=s.states.deadState,d.zombieFellSound.play(),s.isFell=!0,s.isDead=!0):t.isImmortal||t.states.slideState.isCurrent||!n.isZombieAttack(s,t)||(t.positionX<s.positionX+30?s.isLeft=!0:t.positionX>s.positionX+30&&(s.isLeft=!1),n.isCanKillHero(s,t)?t.makeHeroDamage(n,e):t.isImmortal||s.makeAttack()),n.isFakeDeadUp(s,t)&&s.makeReincarnation((0,a.getRandomInt)(1e3,2e3),n,t,i))})}},{key:"pauseLieZomnieTimer",value:function(){this.data.forEach(function(t){t.isDead&&!t.isFell&&t.timeout.pause()})}},{key:"pauseFakeDeadZomniesTimer",value:function(){this.data.forEach(function(t){(t.isFell||t.fakeDead)&&t.timeout.pause()})}},{key:"resumeLieZomniesTimer",value:function(){this.data.forEach(function(t){t.isDead&&!t.isFell&&t.timeout.resume()})}},{key:"resumeFakeDeadZomniesTimer",value:function(){this.data.forEach(function(t){(t.isFell||t.fakeDead)&&t.timeout.resume()})}},{key:"startZombieTimer",value:function(t,e){var i=this;this.zombiesTimer=setInterval(function(){i.data.forEach(function(n){n.currentState.currentSpriteImg>=n.currentState.spriteCount-1?n.isFell?n.makeReincarnation((0,a.getRandomInt)(1e3,2e3),i,t,e):n.isDead||n.fakeDead||(n.isAttack&&(n.isAttack=!1,n.states.attackState.currentSpriteImg=0,n.currentState=n.states.runState),n.currentState.currentSpriteImg=0):n.currentState.currentSpriteImg+=1})},a.settings.zombieSpeed)}}]),e}(h.ObjectsSet),function(){function t(e,i,n){o(this,t),this.img=e,this.positionX=i,this.positionY=n,this.isDead=!1,this.isAttack=!1,this.isFell=!1,this.fakeDead=!1,this.isLeft=!0,this.leftDy=628,this.timeout=null,this.dx=1,this.states=(0,u.setZombiesStates)()}return r(t,[{key:"setInitSatate",value:function(t,e,i){this.currentState=t,this.changeRandomSatate(e,i)}},{key:"changeRandomSatate",value:function(t,e){var i=this;setInterval(function(){if(!i.isDead&&!i.fakeDead&&!t.isPaused)if(e.positionX-i.positionX<a.settings.zombieFeelHeroDistance&&i.positionX-e.positionX<a.settings.zombieFeelHeroDistance&&!e.isImmortal)i.currentState=i.states.runState,2!==i.dx&&(i.dx=2);else{var n=(0,a.getRandomInt)(1,4);1!==i.dx&&(i.dx=1),i.currentState=1===n?i.states.runState:i.states.stayState}},(0,a.getRandomInt)(400,800))}},{key:"makeAttack",value:function(){this.currentState=this.states.attackState,this.isAttack=!0}},{key:"makeDead",value:function(t,e){var i=this;d.zombieAttackSound.play(),d.kunaiInZombieSound.resetTime(),d.kunaiInZombieSound.play(),this.isDead=!0,this.currentState=this.states.deadState,e.score+=a.settings.pointsForZombie,this.timeout=new a.Timeout(function(){t.remove(i)},a.settings.deadZombiesTime),this.timeout.init()}},{key:"makeReincarnation",value:function(t,e,i,n){function s(){0===this.states.deadState.currentSpriteImg?(this.isFell=!1,this.isDead=!1,this.fakeDead=!1,this.riseUp=!1,this.positionX<i.positionX?this.isLeft=!1:this.isLeft=!0,this.currentState=this.states.stayState,e.add(this),n.remove(this)):(this.states.deadState.currentSpriteImg===this.states.deadState.spriteCount-1&&d.zombieReincarnationSound.play(),this.currentState.currentSpriteImg-=1,this.timeout=new a.Timeout(o,100),this.timeout.init())}n.add(this),e.remove(this);var o=s.bind(this);this.timeout=new a.Timeout(o,t),this.timeout.init()}}]),t}())},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function s(){z.checkZombiesStatus(_,F,W),R.checkStatus(_),K.checkStatus(_),j.checkStatus(z,R,_,F),K.checkOpportunityToCreateBonus(_,F),F.isPaused&&F.isEnded&&_.mainTimer&&(z.pauseLieZomnieTimer(),W.pauseFakeDeadZomniesTimer(),c(),k(x.makeReplayEndButtonHovered,b))}function o(t){F.addZombieTimer=setTimeout(function t(){z.addNewZombie(A.canvas.width+40,333,F,_),F.addZombieTimer=setTimeout(t,(0,T.getRandomInt)(1e3-400*T.settings.difficulty,2500-700*T.settings.difficulty))},t)}function r(){R.currentState===R.states.deadState&&(F.bgDx=0),F.bgPosition>=A.canvas.width?F.bgPosition=F.bgDx:F.bgPosition+=F.bgDx,F.roadPosition>=A.canvas.width?F.roadPosition=2*F.bgDx:F.roadPosition+=2*F.bgDx}function a(){s(),A.clearCanvas(),A.drawBg(E.background,F.bgPosition),A.drawRoad(E.road,F.roadPosition),F.isStartDelayEnded||A.drawWinConditions(F),A.drawKunai(j),A.drawBossHealth(R),A.drawRandomBonuses(F,K),A.drawZomieBoss(F,R),A.drawHero(_),A.drawZombies(z),A.drawZombies(W),A.drawScore(F),A.drawHeroStatus(_),!F.isPaused&&F.isStarted&&(F.isStartDelayEnded&&(z.changeZombiesPosition(F.bgDx),W.changeLieZombiesPozition(F.bgDx),_.changePosition(F.bgDx),r(),j.changePosition()),R.changePosition(F,_,z)),F.isPaused&&(A.drawMenubg(),F.isEnded?A.drawEndMenu(F):A.drawPauseMenu()),F.gameId=requestAnimationFrame(a)}function u(){A.clearCanvas(),A.drawBg(E.background,F.bgPosition),A.drawRoad(E.road,F.roadPosition),A.drawMenubg(),F.isShowMainMenu&&A.drawMainMenu(),F.isShowDifficultyMenu&&A.drawDifficultyMenu(),F.isShowControl&&A.drawControlMenu(),F.menuId=requestAnimationFrame(u)}function d(){f(),_.setCurrentState(_.states.stayState),a(),_.startMainTimer(),R.startTimer(T.settings.bossSpeed,F,_,z),F.startDelay=setInterval(function(){F.isStarted=!0,E.playTheme.play(),F.delayTime>0?F.delayTime-=1:(z.startZombieTimer(_,W),o(500),F.isStartDelayEnded=!0,R.positionX=R.startPositionX,R.maxXPosition=R.startPositionX,(0,Z.setHeroKeydownListeners)(F,_,j),(0,Z.setHeroKeyupListeners)(F,_),clearInterval(F.startDelay))},1e3)}function c(){clearInterval(_.mainTimer),clearInterval(z.zombiesTimer),clearInterval(R.timer),clearInterval(_.oneActionTimer),clearTimeout(F.addZombieTimer)}function h(){_.startMainTimer(),z.startZombieTimer(_,W),R.startTimer(T.settings.bossSpeed,F,_,z)}function m(){F.gameId&&(h(),(0,Z.setHeroKeydownListeners)(F,_,j),o(500))}function l(){F.gameId&&(c(),(0,Z.removeHeroKeydownListeners)())}function p(){E.playTheme.resetTime(),(0,Z.removeHeroKeydownListeners)(),(0,Z.removeHeroKeyupListeners)(),c(),cancelAnimationFrame(F.gameId),d()}function f(){_=new H.Hero,R=new Y.ZombieBoss,j=new L.KunaiSet,K=new L.BonusesSet,z=new Y.ZombiesSet,W=new Y.ZombiesSet,F=new T.Game,_.health>_.maxHealth&&(_.health=_.maxHealth),R.currentState=R.states.runState,R.currentHealth=R.health;for(var t in Z.buttons)Z.buttons[t].isPressed=!1}function S(t,e,i,n){x.resetHoverHoverMenuButtons(P.mainMenuButtons),B(i,n),F[t]=!1,F.isShowMainMenu=!0,k(x.makeMainMenuHovered,y)}function g(t,e,i,n){x.resetHoverHoverMenuButtons(e),B(x.makeMainMenuHovered,y),F.isShowMainMenu=!1,F[t]=!0,k(i,n),E.clickMenuSound.play()}function y(t){x.isButtonHovered(t,P.mainMenuButtons.play,P.mainMenuButtons.settings)?(x.resetHoverHoverMenuButtons(P.pauseMenuButtons),B(x.makeMainMenuHovered,y),cancelAnimationFrame(F.menuId),d(),E.clickMenuSound.play(),E.mainMenuTheme.stop()):x.isButtonHovered(t,P.mainMenuButtons.difficulty,P.mainMenuButtons.settings)?g("isShowDifficultyMenu",P.pauseMenuButtons,x.makeDifficultyMenuHovered,w):x.isButtonHovered(t,P.mainMenuButtons.control,P.mainMenuButtons.settings)&&g("isShowControl",P.pauseMenuButtons,x.makeControlMenuHovered,v)}function v(t){x.isButtonHovered(t,P.controlMenuButtons.mainMenuControl,P.controlMenuButtons.settings)&&(S("isShowControl",P.mainMenuButtons,x.makeControlMenuHovered,v),E.pauseSound.play())}function w(t){x.isButtonHovered(t,P.mainMenuButtons.babyMode,P.mainMenuButtons.settings)?(x.setActiveDifficulty(P.mainMenuButtons.babyMode),T.settings.difficulty=0,S("isShowDifficultyMenu",P.mainMenuButtons,x.makeDifficultyMenuHovered,w),E.clickMenuSound.play()):x.isButtonHovered(t,P.mainMenuButtons.normal,P.mainMenuButtons.settings)?(x.setActiveDifficulty(P.mainMenuButtons.normal),T.settings.difficulty=1,S("isShowDifficultyMenu",P.mainMenuButtons,x.makeDifficultyMenuHovered,w),E.clickMenuSound.play()):x.isButtonHovered(t,P.mainMenuButtons.hellMode,P.mainMenuButtons.settings)?(x.setActiveDifficulty(P.mainMenuButtons.hellMode),T.settings.difficulty=2,S("isShowDifficultyMenu",P.mainMenuButtons,x.makeDifficultyMenuHovered,w),E.clickMenuSound.play()):x.isButtonHovered(t,P.mainMenuButtons.mainMenu,P.mainMenuButtons.settings)&&(S("isShowDifficultyMenu",P.mainMenuButtons,x.makeDifficultyMenuHovered,w),E.pauseSound.play())}function M(t){x.isButtonHovered(t,P.pauseMenuButtons.replay,P.pauseMenuButtons.settings)?(x.resetHoverHoverMenuButtons(P.pauseMenuButtons),B(x.makePauseMenuHovered,M),E.clickMenuSound.play(),p()):x.isButtonHovered(t,P.pauseMenuButtons.continue,P.pauseMenuButtons.settings)&&(x.resetHoverHoverMenuButtons(P.pauseMenuButtons),I(),E.clickMenuSound.play())}function b(t){x.isButtonHovered(t,P.pauseMenuButtons.replayEnd,P.pauseMenuButtons.settings)?(B(x.makeReplayEndButtonHovered,b),x.resetHoverHoverMenuButtons(P.pauseMenuButtons),p(),E.clickMenuSound.play()):x.isButtonHovered(t,P.pauseMenuButtons.exit,P.pauseMenuButtons.settings)&&(S("isStarted",P.pauseMenuButtons,x.makeReplayEndButtonHovered,b),cancelAnimationFrame(F.gameId),(0,Z.removeHeroKeydownListeners)(),(0,Z.removeHeroKeyupListeners)(),u(),E.clickMenuSound.play(),E.mainMenuTheme.play())}function k(t,e){A.canvas.addEventListener("mousemove",t),A.canvas.addEventListener("click",e)}function B(t,e){A.canvas.removeEventListener("mousemove",t),A.canvas.removeEventListener("click",e)}function X(){l(),k(x.makePauseMenuHovered,M),z.pauseLieZomnieTimer(),W.pauseFakeDeadZomniesTimer(),F.isPaused=!0,_.isImmortal&&clearTimeout(_.immortalTimer),_.isPerformSingleAction&&(_.isOneAction=!0,_.stateCopy=Object.assign({},_.currentState))}function I(){_.isOneAction||Z.buttons.runLeft.isPressed||Z.buttons.run.isPressed||_.setCurrentState(_.states.stayState),B(x.makePauseMenuHovered,M),x.resetHoverHoverMenuButtons(P.pauseMenuButtons),z.resumeLieZomniesTimer(),W.resumeFakeDeadZomniesTimer(),m(),F.isPaused=!1,_.isOneAction&&(_.setOneAction(_.stateCopy,T.settings.heroSpeed,F,j),_.isOneAction=!1),_.isImmortal&&_.makeHeroImortal(_.immortalTime,z)}function D(t){if(F.isStarted&&F.isStartDelayEnded&&(0,Z.isButtonsPressed)(Z.buttons.pause,t.keyCode)&&!_.isDead&&!R.isDead){E.pauseSound.resetTime(),E.pauseSound.play();F.isPaused?I():X()}}var P=i(1),T=i(2),H=i(6),C=i(7),x=n(C),O=i(4),A=n(O),L=i(5),Y=i(8),E=i(0),Z=i(3),j=new L.KunaiSet,F=new T.Game,_=new H.Hero,R=new Y.ZombieBoss,K=new L.BonusesSet,z=new Y.ZombiesSet,W=new Y.ZombiesSet;window.addEventListener("keydown",D);var U=document.getElementById("loading");Promise.all(E.promisesArr).then(function(){U.style.display="none",E.mainMenuTheme.play(),u(),k(x.makeMainMenuHovered,y)})}]);